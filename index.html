<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Perpetual Breakdown</title>
	<link href="https://fonts.googleapis.com/css?family=Nova+Round|Ubuntu" rel="stylesheet">
	<link rel="stylesheet" href="styles.css">
</head>
<body>
	<div id="container">
		<div id="overview">
			<div class="horizontalCenter">
				<h1>Perpetual Breakdown</h1>
			</div>
			<p>
				Perpetual Breakdown is a procedurally generated metal song created by <a href="https://www.maxstrater.com" target="_blank">Max Strater</a> and <a href="https://www.kylepaulsen.com" target="_blank">Kyle Paulsen</a>. It is based on scheduled sample playback and is written in the key of C minor at 180 bpm. Click the play button at the bottom of the page at any time to start listening.
			</p>
			<p class="sectionsDescription">
				The song structure is composed of <span class="sectionsNumSections"></span> different sections: <span class="sectionsSectionsString"></span>. Each section is detailed below and each section name will be marked with an icon while it is playing. You can also automatically scroll to the currently playing section using the checkbox next to the play button.
			</p>
			<p class="sectionsDescription">
				The first section played is always <i><span class="sectionsFirstSection"></span></i> and then we decide which section to play next using a <a href=https://en.wikipedia.org/wiki/Markov_chain target="_blank">Markov chain</a>. All this really means is that each section has some specific probability to transition to each other section. You can visualize all the different probabilities using a <a href="https://en.wikipedia.org/wiki/Stochastic_matrix" target="_blank">stochastic matrix</a> (also known as a <i>transition matrix</i> or a <i>Markov matrix</i>). The stochastic matrix for the song's sections is shown below. For example, the probability to transition from <i><span class="sectionsFirstSection"></span></i> to <i><span class="sectionsSecondSection"></span></i> is <span class="sectionsProbability"></span>.
			</p>
			<div class="horizontalCenter">
				<table id="stochasticMatrixTable"></table>
			</div>
		</div>
		<!-- make sure the section id mathes the section name-->
		<div id="breakdown">
			<div class="verticalCenter">
				<div class="playingIcon hide">
					<img src="assets/recording.svg">
				</div>
				<h2>Breakdown</h2>
			</div>
			<p>
				This section is composed of a semi-random rhythm played on guitar, bass, and drums. The rhythm is made up of smaller component patterns sequenced one after another such that they maintain a strong downbeat every 8 beats. The components used are the following:
			</p>
			<div class="componentsContainer">
			</div>
			<p>
				You can see the rhythm notated in real time as the samples are scheduled here:
			</p>
			<div class="horizontalCenter">
				<div class="notationContainer">
					<div class="keySignature"></div>
					<div class="breakdownNotation"></div>
				</div>
			</div>
		</div>
		<div id="augmentedBreakdown">
			<div class="verticalCenter">
				<div class="playingIcon hide">
					<img src="assets/recording.svg">
				</div>
				<h2>Augmented Breakdown</h2>
			</div>
			<p>
				This section is essentially the same as the <i>Breakdown</i> section, but with a few extra embellishments added to the samples. There are very dissonant minor second guitar stabs and high pitched guitar squeals added to the available sounds. The drums also ride the open hi-hat instead of crash symbols. The components used are the following:
			</p>
			<div class="componentsContainer">
			</div>
			<p>
				You can see the rhythm notated in real time as the samples are scheduled here:
			</p>
			<div class="horizontalCenter">
				<div class="notationContainer">
					<div class="keySignature"></div>
					<div class="breakdownNotation"></div>
				</div>
			</div>
		</div>
		<div id="counterpoint">
			<div class="verticalCenter">
				<div class="playingIcon hide">
					<img src="assets/recording.svg">
				</div>
				<h2>Counterpoint</h2>
			</div>
			<div class="horizontalCenter">
				<div id="vexFlowCounterpoint"></div>
			</div>
		</div>
		<div id="chromaticCounterpointBridge">
			<div class="verticalCenter">
				<div class="playingIcon hide">
					<img src="assets/recording.svg">
				</div>
				<h2>Chromatic Counterpoint Bridge</h2>
			</div>
			<div class="horizontalCenter">
				<div id="vexFlowChromaticCounterpointBridge"></div>
			</div>
		</div>
		<div id="temporary">
			<h2>Temporary</h2>
			<div class="horizontalCenter">
				<div id="vexFlowTemp"></div>
			</div>
		</div>
	</div>
	<div id="controls">
		<div class="verticalCenter">
			<button id="playPause">Play / Pause</button>
			<div class="verticalCenter">
				<input type="checkbox" id="scrollToSection">
				<label for="automaticallyScrollToSection">Automatically scroll to playing section</label>
			</div>
		</div>
	</div>
	<script>
		// setup global namespace
		window.app = {};
	</script>
	<script src="src/vexflow/vexflow-min.js"></script>
	<script src="src/ui.js"></script>
	<script src="src/util.js"></script>
	<script src="src/counterpointGenerator.js"></script>
	<script src="src/soundsDefinition.js"></script>
	<script src="src/songDefinition.js"></script>
	<script src="src/main.js"></script>
</body>
</html>
